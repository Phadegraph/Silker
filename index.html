<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no,viewport-fit=cover"><title>Silker</title><style>body{margin:0;background:#000;overflow:hidden;touch-action:none;font-family:sans-serif}canvas{display:block;position:fixed;top:0;left:0;width:100%;height:100%;z-index:1}#ui{position:absolute;top:20px;left:20px;z-index:100;pointer-events:none}.btn{background:rgba(20,20,20,.9);color:#0ff;padding:12px;margin-bottom:8px;border-radius:10px;text-align:center;width:150px;font-size:12px;border:1px solid #0ff;pointer-events:auto;font-weight:bold;cursor:pointer;transition:all .2s}#menu{display:none;background:rgba(0,0,0,.95);padding:15px;border-radius:15px;border:1px solid #444}input[type=range]{width:100%;height:20px;pointer-events:auto}label{color:#0ff;font-size:10px;display:block;margin:5px 0 2px;text-transform:uppercase}span{color:#fff;float:right}#C{position:fixed;bottom:25px;right:25px;width:45px;height:45px;border-radius:50%;border:3px solid #0ff;display:none;z-index:101;pointer-events:auto;box-shadow:0 0 15px #0ff}</style></head><body><div id="ui"><div class="btn" onclick="toggleMenu()">MENU</div><div id="menu"><div class="btn" onclick="I()" style="color:#f55;border-color:#f55">RESET</div><div class="btn" onclick="S()" style="color:#5f5;border-color:#5f5">SAVE IMAGE</div><div class="btn" id="A" onclick="toggleAuto()">AUTO: OFF</div><div class="btn" id="R" onclick="rn=!rn;this.innerHTML=`RANDOM: ${rn?'ON':'OFF'}`">RANDOM: OFF</div><div class="btn" id="G" onclick="gh=!gh;this.innerHTML=`GHOST: ${gh?'ON':'OFF'}`">GHOST: OFF</div><div class="btn" onclick="D.getElementById('aud').click()">UPLOAD MUSIC</div><label>SYMMETRY: <span id="vY">6</span></label><input type="range" id="Y" min="2" max="12" value="6" oninput="vY.innerHTML=this.value"><label>DENSITY</label><input type="range" id="D" min="2" max="50" value="20"></div></div><input type="file" id="aud" accept="audio/*" style="display:none" onchange="loadAud(this)"><input type="color" id="C" value="#00F0FF"><canvas id="c"></canvas><script>
let D=document,c=D.getElementById('c'),x=c.getContext('2d'),m=D.getElementById('menu'),ab=D.getElementById('A'),cp=D.getElementById('C'),d=0,mx=0,my=0,lx=0,ly=0,t=0,vl=0,gh=0,auto=0,rn=0,ac,an,fd,av=0,pt=0,k=[1,1,1,1],aud,src;
const I=()=>{c.width=innerWidth;c.height=innerHeight;x.fillStyle="#000";x.fillRect(0,0,c.width,c.height)};
const S=()=>{let l=D.createElement('a');l.download='silk_art.png';l.href=c.toDataURL();l.click()};
const toggleMenu=()=>{let s=m.style.display==='block'?'none':'block';m.style.display=s;cp.style.display=s};
const toggleAuto=()=>{auto=!auto;if(auto)k=k.map(()=>Math.random()*1.5+0.2);ab.innerHTML=`AUTO: ${auto?'ON':'OFF'}`;ab.style.color=auto?'#5f5':'#0ff'};
const loadAud=(i)=>{const f=i.files[0];if(!f)return;if(!ac)ac=new(window.AudioContext||window.webkitAudioContext)();if(aud)aud.pause();aud=new Audio(URL.createObjectURL(f));src=ac.createMediaElementSource(aud);an=ac.createAnalyser();src.connect(an);an.connect(ac.destination);an.fftSize=512;fd=new Uint8Array(an.frequencyBinCount);aud.play()};
const H=h=>[parseInt(h.slice(1,3),16),parseInt(h.slice(3,5),16),parseInt(h.slice(5,7),16)];
const R=(px,py)=>{let s=12,den=D.getElementById('D').value,bc=rn?H(hslToHex((t*40)%360,100,50)):H(cp.value);let w=Math.max(0,1-vl*5),cl=bc.map(v=>Math.round(v+(255-v)*w));x.shadowBlur=vl*10;x.shadowColor=`rgb(${cl[0]},${cl[1]},${cl[2]})`;for(let j=0;j<s;j++){x.beginPath();x.strokeStyle=`rgba(${cl[0]},${cl[1]},${cl[2]},${0.04+j*0.01})`;let o=(j-6)*((+den+av)/12);x.moveTo(px+o-vl*2,py+o-vl*2);x.quadraticCurveTo(px+Math.sin(t+j)*15,py+Math.cos(t+j)*15,px+o,py+o);x.stroke()}x.shadowBlur=0};
function hslToHex(h,s,l){l/=100;const a=s*Math.min(l,1-l)/100;const f=n=>{const k=(n+h/30)%12;const color=l-a*Math.max(Math.min(k-3,9-k,1),-1);return Math.round(255*color).toString(16).padStart(2,'0')};return `#${f(0)}${f(8)}${f(4)}`}
const L=()=>{if(gh){x.globalCompositeOperation='source-over';x.fillStyle='rgba(0,0,0,0.02)';x.fillRect(0,0,c.width,c.height)}if(an){an.getByteFrequencyData(fd);let s=0,w=0;for(let i=0;i<fd.length;i++){s+=fd[i];w+=i*fd[i]}av=(s/fd.length)*2.5;pt=s>0?w/s/fd.length:0}if(auto){let r1=c.width/2.5,r2=c.height/2.5,sp=0.4+pt*4;mx=c.width/2+Math.cos(t*k[0]*sp+Math.sin(t*k[1]))*r1;my=c.height/2+Math.sin(t*k[2]*sp+Math.cos(t*k[3]))*r2;if(!d){lx+=(mx-lx)*0.02;ly+=(my-ly)*0.02}}if(d||auto||vl>.1){if(d){let dx=mx-lx,dy=my-ly;vl=Math.sqrt(dx*dx+dy*dy)*.04;lx+=dx*.05;ly+=dy*.05}else{vl=auto?1.2+(av/15):vl*0.96}let sym=D.getElementById('Y').value;x.globalCompositeOperation='lighter';x.save();x.translate(c.width/2,c.height/2);let sx=lx-c.width/2,sy=ly-c.height/2,n=sym==2?1:sym;for(let i=0;i<n;i++){x.rotate(Math.PI*2/n);R(sx,sy);x.save();sym==2?x.scale(-1,1):x.scale(1,-1);R(sx,sy);x.restore()}x.restore()}t+=0.012;requestAnimationFrame(L)};
const E=e=>{let t=e.touches?e.touches[0]:e;mx=t.clientX;my=t.clientY};c.onmousedown=e=>{d=1;E(e);lx=mx;ly=my};c.ontouchstart=e=>{d=1;E(e);lx=mx;ly=my};window.onmousemove=e=>{if(d)E(e)};c.ontouchmove=e=>{e.preventDefault();E(e)};window.onmouseup=c.ontouchend=()=>d=0;window.onresize=I;I();L();
</script></body></html>
